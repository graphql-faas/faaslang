<!DOCTYPE html>
<!-- Built with spec-md -->
<html><head><meta charset="utf-8"><title>FaaSlang</title><style>body {
  color: #333333;
  font: 13pt/18pt Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  margin: 6rem auto 3rem;
  max-width: 780px;
}


/* Links */

a {
  color: #3B5998;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}


/* Section headers */

h1, h2, h3, h4, h5, h6, h7, h8 {
  margin: 3rem 0 1em;
  position: relative;
}

h1 {
  font-size: 1.5em;
  margin: 8rem 0 2em;
}

h2 {
  font-size: 1.45em;
  margin: 8rem 0 1em;
}

h3 {
  font-size: 1.30em;
  margin: 5rem 0 1em;
}

h4 {
  font-size: 1.20em;
}

h5 {
  font-size: 1.12em;
}

h6, h7, h8 {
  font-size: 1.1em;
}

section .spec-secid {
  margin-right: 1ex;
  position: absolute;
  right: 100%;
  text-align: right;
  white-space: nowrap;
}

footer {
  font-size: 75%;
  opacity: 0.5;
  text-align: center;
  margin-top: 12rem;
}


/* Table of contents */

.spec-toc {
  margin: 1rem 0 3rem;
}

.spec-toc .title {
  content: 'Contents';
  display: block;
  font-weight: bold;
  margin: 3rem 0 1rem;
}

.spec-toc .spec-secid {
  margin-right: 1ex;
}

.spec-toc ol {
  list-style: none;
  padding-left: 0;
}

.spec-toc ol ol {
  list-style: none;
  padding-left: 2ex;
}

.spec-toc li {
  position: relative;
  padding: 5px 0 0 30px;
  margin: -5px 0 0 -30px;
}

.spec-toc a {
  color: #333333;
}

.spec-toc a:hover {
  text-decoration: none;
}

.spec-toc a .spec-secid {
  color: #3B5998;
}

.spec-toc a:hover .spec-secid {
  text-decoration: underline;
}

.spec-toc .toggle {
  display: none;
}

.spec-toc .toggle + label {
  cursor: pointer;
  left: 10px;
  opacity: 1;
  padding: 3px 5px 3px 6px;
  position: absolute;
  top: 8px;
  transform: rotate(0deg);
  transition: all 0.18s ease-in-out;
}

.spec-toc .toggle + label:after {
  border-color: transparent transparent transparent #bbc;
  border-style: solid;
  border-width: 6px 0 6px 7px;
  content: ' ';
  display: block;
  height: 0;
  width: 0;
}

.spec-toc .toggle:checked + label {
  transform: rotate(90deg);
}

.spec-toc li:not(:hover) > .toggle:checked + label {
  opacity: 0;
}

.spec-toc .toggle:not(:checked) ~ ol {
  max-height: 0;
  overflow: hidden;
}


/* Sidebar */

.spec-sidebar-toggle {
  display: none;
}

.spec-sidebar-toggle + label {
  position: fixed;
  right: 0;
  top: 0;
  padding: 10px 15px;
  font-size: 30px;
  color: rgba(0,0,0,0.7);
  z-index: 2;
  cursor: pointer;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}

.spec-sidebar {
  display: none;
  position: fixed;
  right: 0;
  top: 0;
  width: 320px;
  font-size: 80%;
  overflow-y: scroll;
  height: 100%;
  padding: 0 0 5rem 30px;
  box-sizing: border-box;
  background: #f0f0f0;
}

.spec-sidebar-toggle:checked ~ .spec-sidebar {
  display: block;
  box-shadow:
    -1px 0 rgba(0,0,0,0.12),
    -4px 0 8px -2px rgba(0,0,0,0.05);
}

.spec-sidebar .viewing > a:after {
  color: #8b9;
  content: '\2022';
  margin-left: 1ex;
}

@media (min-width: 1240px) {
  .spec-sidebar-toggle + label {
    display: none;
  }

  .spec-sidebar {
    display: block;
    box-shadow:
      inset 1px 0 rgba(0,0,0,0.05),
      inset 4px 0 8px -2px rgba(0,0,0,0.08) !important;
  }

  body {
    padding-right: 300px;
  }
}


/* Notes */

.spec-note {
  background: #FEFEF3;
  border-left: solid 4px #F4E925;
  margin: 1em -1em;
  min-width: 416px;
  padding: 1ex 1em 1ex calc(1em - 4px);
  width: -moz-fit-content;
  width: -webkit-fit-content;
  width: fit-content;
}

.spec-note::before {
  color: #6C6613;
  content: 'Note';
  display: block;
  font: italic 11pt/18pt Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  opacity: 0.6;
  user-select: none;
}


/* Todos */

.spec-todo {
  color: #666666;
  margin: 1em 0 1em 5em;
  min-height: 1em;
}

.spec-todo::before {
  content: 'todo';
  display: block;
  float: left;
  margin-left: -5em;
  text-transform: uppercase;
}

/* Index table */

.spec-index ol {
  list-style-type: none;
  margin: 0 0 0 2rem;
  padding: 0;
  column-width: 210px;
  column-gap: 2rem;
}

.spec-index ol li {
  width: min-content;
}

/* Code */

code {
  background: #FAFAFA;
  font-family: Consolas, Monaco, monospace;
  font-size: 85%;
  font-weight: inherit;
  margin: -2px -1px;
  padding: 3px 3px;
  white-space: pre;
}

pre code {
  background: none;
  font-weight: inherit;
  margin: 0;
  padding: 0;
}

pre {
  background: #FAFAFA;
  border-left: solid 4px #E9E9E9;
  margin: 1em -1em;
  min-width: 40ch;
  padding: 1ex 1em 1ex calc(1em - 4px);
  width: -moz-fit-content;
  width: -webkit-fit-content;
  width: fit-content;
}

.spec-example {
  background: #FAFAFF;
  border-left: solid 4px #BBBBFF;
}

.spec-counter-example {
  background: #FFFAFA;
  border-left: solid 4px #FFBBBB;
}

.spec-example > a,
.spec-counter-example > a {
  display: block;
  font: italic 11pt/18pt Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  opacity: 0.6;
  user-select: none;
}

.spec-counter-example > a {
  color: #98593b;
}


/* Tables */

table {
  border-collapse: collapse;
}

th {
  background-color: #F9F9F9;
}

td, th {
  border: 1px solid #D0D0D0;
  padding: 0.4em;
  vertical-align: baseline;
}


/* Edits */

ins {
  background-color: rgba(0, 200, 30, 0.08);
  text-decoration: none;
}

del {
  background-color: rgba(200, 0, 0, 0.08);
}

.spec-added, .spec-removed {
  border-left: 4px solid;
  margin-left: -18px;
  padding-left: 14px;
}

.spec-added {
  border-color: #396;
}

.spec-removed {
  border-color: #933;
  text-decoration: line-through;
}


/* Values */

.spec-keyword {
  font-weight: bold;
}

.spec-string {
  font-family: Consolas, Monaco, monospace;
  white-space: pre;
}

var {
  font-style: italic;
}

*[data-name] {
  transition: 0.15s background ease-out;
  border-radius: 2px;
  padding: 0 3px;
  margin: 0 -3px;
}


/* Grammar semantics, algorithms and calls */

.spec-semantic,
.spec-algo {
  margin: 1rem 0 1rem 2rem;
}

.spec-semantic > .spec-rhs {
  display: inline-block;
  margin-left: 1ex;
}

.spec-semantic > .spec-nt::after,
.spec-algo > .spec-call:first-child::after {
  content: ':';
  font-style: normal;
  font-weight: bold;
  margin-left: 1ex;
}

.spec-semantic ol, .spec-semantic ol ol ol ol,
.spec-algo ol, .spec-algo ol ol ol ol {
  list-style-type: decimal;
}

.spec-semantic ol ol, .spec-semantic ol ol ol ol ol,
.spec-algo ol ol, .spec-algo ol ol ol ol ol {
  list-style-type: lower-alpha;
}

.spec-semantic ol ol ol, .spec-semantic ol ol ol ol ol ol,
.spec-algo ol ol ol, .spec-algo ol ol ol ol ol ol {
  list-style-type: lower-roman;
}

.spec-call > a {
  color: inherit;
}


/* Grammar productions */

.spec-production {
  margin: 1rem 0 1rem 2rem;
}

.spec-production > .spec-nt::after {
  content: ':';
  font-style: normal;
  font-weight: bold;
  margin: 0 1ex;
}

.spec-semantic.d2 > .spec-nt::after,
.spec-production.d2 > .spec-nt::after {
  content: '::';
}

.spec-semantic.d3 > .spec-nt::after,
.spec-production.d3 > .spec-nt::after {
  content: ':::';
}

.spec-rhs {
  margin-left: 2rem;
}

.spec-oneof {
  display: inline;
}

.spec-oneof::before {
  content: 'one of';
  font-style: normal;
  font-weight: bold;
}

.spec-oneof > table {
  margin-left: 2rem;
}

.spec-oneof .spec-rhs {
  border: none;
  margin: 0;
  padding: 0 0.5em;
  vertical-align: baseline;
}

.spec-rhs .spec-constrained:not(:first-child),
.spec-rhs .spec-quantified:not(:first-child),
.spec-rhs .spec-nt:not(:first-child),
.spec-rhs .spec-t:not(:first-child),
.spec-rhs .spec-rx:not(:first-child),
.spec-rhs .spec-prose:not(:first-child),
.spec-rhs .spec-empty:not(:first-child),
.spec-rhs .spec-lookahead:not(:first-child) {
  margin-left: 1ex;
}

.spec-condition {
  font-size: 85%;
}

.spec-condition::before {
  content: '[+'
}

.spec-condition.not::before {
  content: '[~'
}

.spec-condition::after {
  content: ']'
}

.spec-empty,
.spec-prose {
  color: #666666;
}

.spec-nt {
  font-style: italic;
}

.spec-nt > a {
  color: inherit;
}

.spec-quantifiers,
.spec-params {
  font-size: 65%;
  font-style: normal;
  vertical-align: sub;
}

.spec-quantifier.list {
  color: #3348D3;
}

.spec-quantifier.optional {
  color: #83238E;
}

.spec-params,
.spec-condition {
  color: #1C7758;
}

.spec-params::before {
  content: '[';
}

.spec-params::after {
  content: ']';
}

.spec-quantifier:not(:last-child)::after,
.spec-param:not(:last-child)::after {
  color: #666666;
  content: ', ';
}

.spec-param.conditional::before {
  content: '?';
}

.spec-t, .spec-rx {
  color: #333333;
  font-family: monospace;
  font-weight: bold;
}

.spec-butnot::before {
  color: #666666;
  content: 'but not';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-weight: normal;
  margin-right: 1ex;
}

.spec-butnot > *:not(:first-child)::before {
  color: #666666;
  content: 'or';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-weight: normal;
  margin-right: 1ex;
}

.spec-rhs .spec-oneof::before,
.spec-rhs .spec-butnot::before {
  margin-left: 1ex;
}

.spec-lookahead > * {
  margin: 0 !important;
}

.spec-lookahead > *:not(:first-child)::before {
  color: #666666;
  content: ', ';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-style: normal;
  font-weight: normal;
}

.spec-lookahead::before {
  color: #666666;
  content: '[lookahead = ';
  font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;
  font-style: normal;
  font-weight: normal;
}

.spec-lookahead.not::before {
  content: '[lookahead \2260  ';
}

.spec-lookahead.set::before {
  content: '[lookahead \2208  {';
  margin-right: 0;
}

.spec-lookahead.set.not::before {
  content: '[lookahead \2209  {';
}

.spec-lookahead::after {
  color: #666666;
  content: ']';
}

.spec-lookahead.set::after {
  content: '}]';
}
</style><style>/* Copied from node_modules/prismjs/themes/prism.css */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style><script>(function (){
var styleSheet = document.getElementsByTagName('style')[0].sheet;
var ruleIndex;

function removeHighlight() {
  if (ruleIndex) {
    styleSheet.deleteRule(ruleIndex);
    ruleIndex = void 0;
  }
}

function highlightKeyword(name) {
  removeHighlight();
  ruleIndex = styleSheet.insertRule(
    '*[data-name="' + name + '"] { background: #FBF8D0; }',
    styleSheet.cssRules.length
  );
}

document.documentElement.addEventListener('mouseover', function (event) {
  var nameAttribute = event.target.attributes['data-name'];
  if (nameAttribute) {
    highlightKeyword(nameAttribute.value);
  }
});

document.documentElement.addEventListener('mouseout', removeHighlight);
})()</script></head><body><header><h1>FaaSlang</h1><nav class="spec-toc"><div class="title">Contents</div><ol><li><a href="#sec-FaaSlang"><span class="spec-secid">1</span>FaaSlang</a><input hidden class="toggle" type="checkbox" checked id="_toggle_1" /><label for="_toggle_1"></label><ol><li><a href="#sec-Function-as-a-Service-Language"><span class="spec-secid">1.1</span>Function as a Service Language</a></li></ol></li><li><a href="#sec-Table-of-Contents"><span class="spec-secid">2</span>Table of Contents</a></li><li><a href="#sec-What-is-FaaSlang-"><span class="spec-secid">3</span>What is FaaSlang?</a></li><li><a href="#sec-Why-FaaSlang-"><span class="spec-secid">4</span>Why FaaSlang?</a></li><li><a href="#sec-Specification"><span class="spec-secid">5</span>Specification</a><input hidden class="toggle" type="checkbox" checked id="_toggle_5" /><label for="_toggle_5"></label><ol><li><a href="#sec-FaaSlang-Resource-Definition"><span class="spec-secid">5.1</span>FaaSlang Resource Definition</a></li><li><a href="#sec-Context-Definition"><span class="spec-secid">5.2</span>Context Definition</a></li><li><a href="#sec-Parameters"><span class="spec-secid">5.3</span>Parameters</a><input hidden class="toggle" type="checkbox" checked id="_toggle_5.3" /><label for="_toggle_5.3"></label><ol><li><a href="#sec-Constraints"><span class="spec-secid">5.3.1</span>Constraints</a></li><li><a href="#sec-Types"><span class="spec-secid">5.3.2</span>Types</a></li><li><a href="#sec-Type-Conversion"><span class="spec-secid">5.3.3</span>Type Conversion</a></li><li><a href="#sec-Nullability"><span class="spec-secid">5.3.4</span>Nullability</a></li><li><a href="#sec-Setting-HTTP-headers"><span class="spec-secid">5.3.5</span>Setting HTTP headers</a></li></ol></li><li><a href="#sec-FaaSlang-Resource-Requests"><span class="spec-secid">5.4</span>FaaSlang Resource Requests</a><input hidden class="toggle" type="checkbox" checked id="_toggle_5.4" /><label for="_toggle_5.4"></label><ol><li><a href="#sec-Context"><span class="spec-secid">5.4.1</span>Context</a></li><li><a href="#sec-Errors"><span class="spec-secid">5.4.2</span>Errors</a><input hidden class="toggle" type="checkbox" checked id="_toggle_5.4.2" /><label for="_toggle_5.4.2"></label><ol><li><a href="#sec-ClientError"><span class="spec-secid">5.4.2.1</span>ClientError</a></li><li><a href="#sec-ParameterError"><span class="spec-secid">5.4.2.2</span>ParameterError</a><input hidden class="toggle" type="checkbox" checked id="_toggle_5.4.2.2" /><label for="_toggle_5.4.2.2"></label><ol><li><a href="#sec-Details-Required"><span class="spec-secid">5.4.2.2.1</span>Details: Required</a></li><li><a href="#sec-Details-Invalid"><span class="spec-secid">5.4.2.2.2</span>Details: Invalid</a></li></ol></li><li><a href="#sec-FatalError"><span class="spec-secid">5.4.2.3</span>FatalError</a></li><li><a href="#sec-RuntimeError"><span class="spec-secid">5.4.2.4</span>RuntimeError</a></li><li><a href="#sec-ValueError"><span class="spec-secid">5.4.2.5</span>ValueError</a></li></ol></li></ol></li></ol></li><li><a href="#sec-FaaSlang-Server-and-Gateway-Implementation"><span class="spec-secid">6</span>FaaSlang Server and Gateway: Implementation</a></li><li><a href="#sec-Acknowledgements"><span class="spec-secid">7</span>Acknowledgements</a></li></ol></nav></header><section id="sec-FaaSlang" secid="1"><h2><span class="spec-secid" title="link to this section"><a href="#sec-FaaSlang">1</a></span>FaaSlang</h2><p><img src="/images/faaslang-logo-small.png" alt="FaaSlang Logo"/></p><p><img src="https://travis-ci.org/faaslang/faaslang.svg?branch=master" alt="travis-ci build"/> <img src="https://badge.fury.io/js/faaslang.svg" alt="npm version"/></p><section id="sec-Function-as-a-Service-Language" secid="1.1"><h3><span class="spec-secid" title="link to this section"><a href="#sec-Function-as-a-Service-Language">1.1</a></span>Function as a Service Language</h3><p>The following is a working draft of the latest FaaSlang specification, version <strong>0.3.x</strong>, dated <strong>February 12th, 2018</strong>.</p><p>FaaSlang is a simple <strong>open specification</strong> intended to define semantics and implementation details around FaaS (&ldquo;serverless&rdquo;) functions, gateways and client interfaces (requests from any language / SDK). It has been designed with the goal of decreasing organizational complexity around FaaS microservices by encouraging simple conventions for how we document and interface with them, <strong>including type safety mechanisms</strong>. In the same way GraphQL is intended to provide opinions and a specification for the way developers interface with nested relational (graph) data, FaaSlang does the same for FaaS resources.</p><p>If you use a FaaSlang&#8208;compliant deployment and API gateway (for example, as used by https://stdlib.com) you get the following benefits over traditional gateways for serverless functions:</p><ul><li>Standard Calling Conventions (HTTP)</li><li>Type Safety</li><li>Enforced Documentation</li><li>Background Execution (immediately return response, run logic as a worker)</li></ul><p>And that&rsquo;s just the beginning. All of the goodies you&rsquo;re looking for like rate limiting, authentication, etc. are not part of the FaaSlang specification but can easily be added to the example provided in this repository.</p></section></section><section id="sec-Table-of-Contents" secid="2"><h2><span class="spec-secid" title="link to this section"><a href="#sec-Table-of-Contents">2</a></span>Table of Contents</h2><ol><li><a href="#introduction">Introduction</a></li><li><a href="#why-faaslang">Why FaaSlang?</a></li><li><a href="#specification">Specification</a><ol><li><a href="#faaslang-resource-definition">FaaSlang Resource Definition</a></li><li><a href="#context-definition">Context Definition</a></li><li><a href="#parameters">Parameters</a><ol><li><a href="#constraints">Constraints</a></li><li><a href="#types">Types</a></li><li><a href="#type-conversion">Type Conversion</a></li><li><a href="#nullability">Nullability</a></li></ol></li><li><a href="#faaslang-resource-requests">FaaSlang Resource Requests</a><ol><li><a href="#context">Context</a></li><li><a href="#errors">Errors</a><ol><li><a href="#clienterror">ClientError</a></li><li><a href="#parametererror">ParameterError</a><ol><li><a href="#details-required">Details: Required</a></li><li><a href="#details-invalid">Details: Invalid</a></li></ol></li><li><a href="#fatalerror">FatalError</a></li><li><a href="#runtimeerror">RuntimeError</a></li><li><a href="#valueerror">ValueError</a></li></ol></li></ol></li></ol></li><li><a href="#faaslang-server-and-gateway-implementation">FaaSlang Server and Gateway: Implementation</a></li><li><a href="#acknowledgements">Acknowledgements</a></li></ol></section><section id="sec-What-is-FaaSlang-" secid="3"><h2><span class="spec-secid" title="link to this section"><a href="#sec-What-is-FaaSlang-">3</a></span>What is FaaSlang?</h2><p>To put it simply, FaaSlang defines semantics and rules for a &ldquo;serverless&rdquo; function deployment and execution (API) gateway to turn this:</p><pre><code><span class="token comment" spellcheck="true">// hello_world.js</span>

<span class="token comment" spellcheck="true">/**
* My hello world function!
*/</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>Into an infinitely scalable web API (using &ldquo;serverless&rdquo; providers) that can be called over HTTP like this (GET):</p><pre><code>https://myhost.com/username/servicename/hello_world?name=joe
</code></pre><p>Or like this (POST):</p><pre><code><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"joe"</span>
<span class="token punctuation">}</span>
</code></pre><p>And gives a result like this:</p><pre><code><span class="token string">"hello joe"</span>
</code></pre><p>Or, when a type mismatch occurs (like <code>{&quot;name&quot;:10}</code>):</p><pre><code><span class="token punctuation">{</span>
  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"ParameterError"</span>
    ...
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></section><section id="sec-Why-FaaSlang-" secid="4"><h2><span class="spec-secid" title="link to this section"><a href="#sec-Why-FaaSlang-">4</a></span>Why FaaSlang?</h2><p>The &ldquo;serverless&rdquo; space is growing rapidly, and as it grows, so do the toolchains required to keep up. Each infrastructure provider imposes its own standard and way of doing things around FaaS to the point we&rsquo;re relying on individual developers to pick and choose the best framework for deployment.</p><p>FaaSlang takes a different approach, and offers a specification for an API Gateway (and a reasonably robust, non&#8208;vendor&#8208;specific Node.js implementation of such) that acts as a way to &ldquo;lock in&rdquo; the way you and your team members deploy to and execute your &ldquo;serverless&rdquo; functions.</p><p>Take a current example of an AWS Lambda function <strong>(A)</strong>;</p><pre><code>exports<span class="token punctuation">.</span>handler <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> myVar <span class="token operator">=</span> event<span class="token punctuation">.</span>myVar<span class="token punctuation">;</span>
  <span class="token keyword">let</span> requiredVar <span class="token operator">=</span> event<span class="token punctuation">.</span>requiredVar<span class="token punctuation">;</span>
  myVar <span class="token operator">=</span> myVar <span class="token operator">===</span> undefined <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> myVar<span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Hello from Lambda!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>Or a Microsoft Azure function <strong>(B)</strong>;</p><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> myVar <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>myVar <span class="token operator">||</span> req<span class="token punctuation">.</span>body <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>myVar<span class="token punctuation">;</span>
  <span class="token keyword">let</span> requiredVar <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>requiredVar <span class="token operator">||</span> req<span class="token punctuation">.</span>body <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>requiredVar<span class="token punctuation">;</span>
  myVar <span class="token operator">=</span> myVar <span class="token operator">===</span> undefined <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> myVar<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>res <span class="token operator">=</span> <span class="token punctuation">{</span>body<span class="token punctuation">:</span> <span class="token string">'Hello from Microsoft Azure!'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>FaaSlang instead defines the Node.js function footprint;</p><pre><code><span class="token comment" spellcheck="true">/**
* @param {Number} myVar A number
* @param {String} requiredVar must be a string!
* @returns {String}
*/</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span>myVar <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> requiredVar<span class="token punctuation">,</span> context<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Hello from FaaSlang-compliant service vendor.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>Where <strong>comments are used as part of the semantic definition</strong> for type&#8208;safety (if they can&rsquo;t be inferred from defaults), expected parameters can be specifically defined, and you still have an optional <code>context</code> object for more robust execution (argument overloading, etc.)</p><p>Here&rsquo;s what the current FaaS workflow looks like:</p><p><img src="/images/current-faas-workflow.jpg" alt="Current FaaS Workflow"/></p><p>And this is what a FaaSlang&#8208;enabled workflow looks like.</p><p><img src="/images/faaslang-workflow.jpg" alt="FaaSlang Workflow"/></p><p>FaaSlang is the result of tens of thousands of FaaS deployments, by thousands of developers, spread across a number of cloud service providers and the need to standardize our ability to organize and communicate with these functions.</p></section><section id="sec-Specification" secid="5"><h2><span class="spec-secid" title="link to this section"><a href="#sec-Specification">5</a></span>Specification</h2><section id="sec-FaaSlang-Resource-Definition" secid="5.1"><h3><span class="spec-secid" title="link to this section"><a href="#sec-FaaSlang-Resource-Definition">5.1</a></span>FaaSlang Resource Definition</h3><p>A FaaSlang definition is a <code>definition.json</code> file that respects the following format.</p><p>Given a function like this (filename <code>my_function.js</code>):</p><pre><code><span class="token comment" spellcheck="true">/**
* This is my function, it likes the greek alphabet
* @param {String} alpha Some letters, I guess
* @param {Number} beta And a number
* @param {Boolean} gamma True or false?
* @returns {Object} some value
*/</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> my_function <span class="token punctuation">(</span>alpha<span class="token punctuation">,</span> beta <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> gamma<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">/* your code */</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>You would provide a function definition that looks like this:</p><pre><code><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"my_function"</span><span class="token punctuation">,</span>
  <span class="token property">"format"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"nodejs"</span><span class="token punctuation">,</span>
    <span class="token property">"async"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"This is my function, it likes the greek alphabet"</span><span class="token punctuation">,</span>
  <span class="token property">"bg"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"info"</span><span class="token punctuation">,</span>
    <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">""</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"charge"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"context"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>
  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"alpha"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Some letters, I guess"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"beta"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>
      <span class="token property">"defaultValue"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"And a number"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"gamma"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"boolean"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"True or false?"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"returns"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"some value"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>This definition is <em>extensible</em>, meaning you can add additional fields to it, but it <strong>must</strong> obey this schema.</p><p>A definition must implement the following fields;</p><table><thead><tr><th>Field </th><th>Definition </th></tr></thead><tbody><tr><td>name </td><td>A user&#8208;readable function name (used to execute the function), must match <code>/[A-Z][A-Z0-9_]*/i</code> </td></tr><tr><td>format </td><td>An object requiring a <code>language</code> field, along with any implementation details </td></tr><tr><td>description </td><td>A brief description of what the function does, can be empty (<code>&quot;&quot;</code>) </td></tr><tr><td>bg </td><td>An object containing &ldquo;mode&rdquo; and &ldquo;value&rdquo; parameters specifying the behavior of function responses when executed in the background </td></tr><tr><td>charge </td><td>An integer between 0 and 100 defining the cost (arbitrary units) to run this function, charged to authenticated users </td></tr><tr><td>params </td><td>An array of <code>NamedParameter</code>s, representing function arguments</td></tr><tr><td>returns </td><td>A <code>Parameter</code> without a <code>defaultValue</code> representing function return value </td></tr></tbody></table></section><section id="sec-Context-Definition" secid="5.2"><h3><span class="spec-secid" title="link to this section"><a href="#sec-Context-Definition">5.2</a></span>Context Definition</h3><p>If the function does not access execution context details, this should always be null. If it is an object, it indicates that the function <em>does</em> access context details (i.e. <code>remoteAddress</code>, http headers, etc. &ndash; see <a href="#context">Context</a>).</p><p>This object <strong>does not have to be empty</strong>, it can contain vendor&#8208;specific details; for example <code>&quot;context&quot;: {&quot;user&quot;: [&quot;id&quot;, &quot;email&quot;]}</code> may indicate that the execution context specifically accesses authenticated user id and email addresses.</p></section><section id="sec-Parameters" secid="5.3"><h3><span class="spec-secid" title="link to this section"><a href="#sec-Parameters">5.3</a></span>Parameters</h3><p>Parameters have the following format;</p><table><thead><tr><th>Field </th><th>Required </th><th>Definition </th></tr></thead><tbody><tr><td>name </td><td>NamedParameter Only </td><td>The name of the Parameter, must match <code>/[A-Z][A-Z0-9_]*/i</code> </td></tr><tr><td>type </td><td>yes </td><td>A string representing a valid FaaSlang type </td></tr><tr><td>description </td><td>yes </td><td>A short description of the parameter, can be empty string (<code>&quot;&quot;</code>) </td></tr><tr><td>defaultValue </td><td>no </td><td>Must match the specified type, <strong>if not provided this parameter is required</strong> </td></tr></tbody></table><section id="sec-Constraints" secid="5.3.1"><h4><span class="spec-secid" title="link to this section"><a href="#sec-Constraints">5.3.1</a></span>Constraints</h4><p>The <strong>first parameter can never be of type &ldquo;Object&rdquo;</strong>. This is to ensure request consistency with generic calls (i.e. support for argument overloading) across all language implementations.</p></section><section id="sec-Types" secid="5.3.2"><h4><span class="spec-secid" title="link to this section"><a href="#sec-Types">5.3.2</a></span>Types</h4><p>As FaaSlang is intended to be polyglot, functions defined with it must have a strongly typed signature. Not all types are guaranteed to be consumable in the same way in every language, and we will continue to define specifications for how each language should interface with FaaSlang types. At present, the types are a limited superset of JSON values.</p><table><thead><tr><th>Type </th><th>Definition </th><th>Example Input Values (JSON) </th></tr></thead><tbody><tr><td>boolean </td><td>True or False </td><td><code>true</code> or <code>false</code> </td></tr><tr><td>string </td><td>Basic text or character strings </td><td><code>&quot;hello&quot;</code>, <code>&quot;GOODBYE!&quot;</code> </td></tr><tr><td>number </td><td>Any double&#8208;precision <a href="https://en.wikipedia.org/wiki/IEEE_floating_point">Floating Point</a> value </td><td><code>2e+100</code>, <code>1.02</code>, <code>-5</code> </td></tr><tr><td>float </td><td>Alias for <code>number</code> </td><td><code>2e+100</code>, <code>1.02</code>, <code>-5</code> </td></tr><tr><td>integer </td><td>Subset of <code>number</code>, integers between <code>-2^53 + 1</code> and <code>+2^53 - 1</code> (inclusive) </td><td><code>0</code>, <code>-5</code>, <code>2000</code> </td></tr><tr><td>object </td><td>Any JSON&#8208;serializable Object </td><td><code>{}</code>, <code>{&quot;a&quot;:true}</code>, <code>{&quot;hello&quot;:[&quot;world&quot;]}</code> </td></tr><tr><td>object.http </td><td>An object representing an HTTP Response. Accepts <code>headers</code>, <code>body</code> and <code>statusCode</code> keys </td><td><code>{&quot;body&quot;: &quot;Hello World&quot;}</code>, <code>{&quot;statusCode&quot;: 404, &quot;body&quot;: &quot;not found&quot;}</code>, <code>{&quot;headers&quot;: {&quot;Content-Type&quot;: &quot;image/png&quot;}, &quot;body&quot;: new Buffer(...)}</code> </td></tr><tr><td>array </td><td>Any JSON&#8208;serializable Array </td><td><code>[]</code>, <code>[1, 2, 3]</code>, <code>[{&quot;a&quot;:true}, null, 5]</code> </td></tr><tr><td>buffer </td><td>Raw binary octet (byte) data representing a file </td><td><code>{&quot;_bytes&quot;: [8, 255]}</code> or <code>{&quot;_base64&quot;: &quot;d2h5IGRpZCB5b3UgcGFyc2UgdGhpcz8/&quot;}</code> </td></tr><tr><td>any </td><td>Any value mentioned above </td><td><code>5</code>, <code>&quot;hello&quot;</code>, <code>[]</code> </td></tr></tbody></table></section><section id="sec-Type-Conversion" secid="5.3.3"><h4><span class="spec-secid" title="link to this section"><a href="#sec-Type-Conversion">5.3.3</a></span>Type Conversion</h4><p>The <code>buffer</code> type will automatically be converted from any <code>object</code> with a <strong>single key&#8208;value pair matching the footprints</strong> <code>{&quot;_bytes&quot;: []}</code> or <code>{&quot;_base64&quot;: &quot;&quot;}</code>.</p><p>Otherwise, parameters provided to a function are expected to match their defined types. Requests made over HTTP via query parameters or POST data with type <code>application/x-www-form-urlencoded</code> will be automatically converted from strings to their respective expected types, when possible (see <a href="#faaslang-resource-requests">FaaSlang Resource Requests</a> below):</p><table><thead><tr><th>Type </th><th>Conversion Rule </th></tr></thead><tbody><tr><td>boolean </td><td><code>&quot;t&quot;</code> and <code>&quot;true&quot;</code> become <code>true</code>, <code>&quot;f&quot;</code> and <code>&quot;false&quot;</code> become <code>false</code>, otherwise <strong>do not convert</strong> </td></tr><tr><td>string </td><td>No conversion </td></tr><tr><td>number </td><td>Determine float value, if NaN <strong>do not convert</strong>, otherwise convert </td></tr><tr><td>float </td><td>Determine float value, if NaN <strong>do not convert</strong>, otherwise convert </td></tr><tr><td>integer </td><td>Determine float value, if NaN <strong>do not convert</strong>, may fail integer type check if not in range </td></tr><tr><td>object </td><td>Parse as JSON, if invalid <strong>do not convert</strong>, object may fail type check (array, buffer) </td></tr><tr><td>object.http </td><td>Parse as JSON, if invalid <strong>do not convert</strong>, object may fail type check (array, buffer) </td></tr><tr><td>array </td><td>Parse as JSON, if invalid <strong>do not convert</strong>, object may fail type check (object, buffer) </td></tr><tr><td>buffer </td><td>Parse as JSON, if invalid <strong>do not convert</strong>, object may fail type check (object, array) </td></tr><tr><td>any </td><td>No conversion </td></tr></tbody></table></section><section id="sec-Nullability" secid="5.3.4"><h4><span class="spec-secid" title="link to this section"><a href="#sec-Nullability">5.3.4</a></span>Nullability</h4><p>All types are nullable, but <strong>nullability can only be specified</strong> by setting <code>&quot;defaultValue&quot;: null</code> in the <code>NamedParameter</code> definition. That is to say, if a default value is provided, the type is no longer nullable.</p></section><section id="sec-Setting-HTTP-headers" secid="5.3.5"><h4><span class="spec-secid" title="link to this section"><a href="#sec-Setting-HTTP-headers">5.3.5</a></span>Setting HTTP headers</h4><p>The FaaSlang specification is not intended to be solely used over HTTP, though if used over HTTP with a provided callback method, <strong>the third parameter passed to callback should be an Object representing HTTP Header key&#8208;value pairs</strong>.</p><p>For example, to return an image that&rsquo;s of type <code>image/png</code>...</p><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span>imageName<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token comment" spellcheck="true">// fetch image, returns a buffer</span>
  <span class="token keyword">let</span> png <span class="token operator">=</span> imageName <span class="token operator">===</span> <span class="token string">'cat'</span> <span class="token operator">?</span>
    fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/images/kitty.png`</span></span><span class="token punctuation">)</span> <span class="token punctuation">:</span>
    fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/images/no-image.png`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">// Forces image/png over HTTP requests, default</span>
  <span class="token comment" spellcheck="true">//  for buffer would otherwise be application/octet-stream</span>
  <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> png<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'image/png'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>You can use the third parameter <strong>only when a callback ends the function</strong>, i.e. <em>not for use with async functions</em>. This can be used to serve any type of content via HTTP, set cache details (E&#8208;Tag header), etc.</p></section></section><section id="sec-FaaSlang-Resource-Requests" secid="5.4"><h3><span class="spec-secid" title="link to this section"><a href="#sec-FaaSlang-Resource-Requests">5.4</a></span>FaaSlang Resource Requests</h3><p>FaaSlang&#8208;compliant requests <em>must</em> complete the following steps;</p><ol><li>Ensure the <strong>Resource Definition</strong> is valid and compliant, either on storage or accession.</li><li>Performs a handshake (i.e. HTTP) with initial request details</li><li>Accept an <code>Array</code>, <code>Object</code> or a string of URLencoded variables</li><li>If over HTTP and query parameters present, query parameters used as URL encoded variables</li><li>If over HTTP POST and query parameters present, reject requests that try to specify a POST body as well with a <code>ClientError</code></li><li>If over HTTP POST, requests <strong>must</strong> include a <code>Content-Type</code> header or a <code>ClientError</code> is immediately returned</li><li>If over HTTP POST, <code>Content-Type</code> <strong>must</strong> be <code>application/json</code> for <code>Array</code> or <code>Object</code> data, or <code>application/x-www-form-urlencoded</code> for string data or a <code>ClientError</code> is immediately returned</li><li>If <code>application/x-www-form-urlencoded</code> values are provided (either via POST body or query parameters), convert types based on <a href="#type-conversion">Type Conversion</a> and knowledge of the function definition and create an <code>Object</code></li><li>If <code>Array</code>: Parameters will be checked for type consistency in the order of the definition <code>params</code></li><li>If <code>Object</code>: Parameters will be checked for type consistency based on names of the definition <code>params</code></li><li>If any inconsistencies are found, cease execution and immediately return a <code>ParameterError</code></li><li>If a parameter has no defaultValue specified and is not provided, immediately return a <code>ParameterError</code></li><li>Try to execute the function, if the function fails to parse or is not valid, immediately return a <code>FatalError</code></li><li>If a function hits a specified timeout (execution time limit), immediately return a <code>FatalError</code></li><li>If a function returns an error (via callback) or one is thrown and not caught, immediately return a <code>RuntimeError</code></li><li>If function returns inconsistent response (does not match <code>returns</code> type), immediately return a <code>ValueError</code></li><li>If no errors are encountered, return the value to the client</li><li>If over HTTP and <code>content-type</code> is not being overloaded (i.e. developer specified through a vendor&#8208;specific mechanism), return <code>buffer</code> type data as <code>application/octet-stream</code> and any other values as <code>application/json</code>.</li></ol><section id="sec-Context" secid="5.4.1"><h4><span class="spec-secid" title="link to this section"><a href="#sec-Context">5.4.1</a></span>Context</h4><p>Every function intended to be consumed via FaaSlang has the option to specify an <em>optional</em> magic <code>context</code> parameter that receives vendor&#8208;specific information about the function execution context &ndash; for example, if consumed over HTTP, header details. FaaSlang definitions must specify whether or not they consume a <code>context</code> object. Context objects are extensible but <strong>MUST</strong> contain the following fields;</p><table><thead><tr><th>Field </th><th>Definition </th></tr></thead><tbody><tr><td>params </td><td>An <code>object</code> mapping called parameter names to their values </td></tr><tr><td>http </td><td><code>null</code> if not accessed via http, otherwise an <code>object</code> </td></tr><tr><td>http.headers </td><td>If accessed via HTTP, an <code>object</code> containing header values </td></tr></tbody></table></section><section id="sec-Errors" secid="5.4.2"><h4><span class="spec-secid" title="link to this section"><a href="#sec-Errors">5.4.2</a></span>Errors</h4><p>Errors returned by FaaSlang&#8208;compliant services must follow the following JSON format:</p><pre><code><span class="token punctuation">{</span>
  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ClientError"</span><span class="token punctuation">,</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"You know nothing, Jon Snow"</span><span class="token punctuation">,</span>
    <span class="token property">"details"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p><code>details</code> is an optional object that can provide additional Parameter details. Valid Error types are:</p><ul><li><code>ClientError</code></li><li><code>ParameterError</code></li><li><code>FatalError</code></li><li><code>RuntimeError</code></li><li><code>ValueError</code></li></ul><section id="sec-ClientError" secid="5.4.2.1"><h5><span class="spec-secid" title="link to this section"><a href="#sec-ClientError">5.4.2.1</a></span>ClientError</h5><p><code>ClientError</code>s are returned as a result of bad or malformed client data, including lack of authorization or a missing function (not found). If over HTTP, they <strong>must</strong> returns status codes in the range of <code>4xx</code>.</p></section><section id="sec-ParameterError" secid="5.4.2.2"><h5><span class="spec-secid" title="link to this section"><a href="#sec-ParameterError">5.4.2.2</a></span>ParameterError</h5><p><code>ParameterError</code>s are a result of Parameters not passing type&#8208;safety checks, and <strong>must</strong> return status code <code>400</code> if over HTTP.</p><p>Parameter Errors <strong>must</strong> have the following format;</p><pre><code><span class="token punctuation">{</span>
  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ParameterError"</span><span class="token punctuation">,</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"ParameterError"</span><span class="token punctuation">,</span>
    <span class="token property">"details"</span><span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p><code>&quot;details&quot;</code> should be an object mapping parameter names to their respective validation (type&#8208;checking) errors. Currently, this specification defines two classifications of a ParameterError for a parameter; <em>required</em> and <em>invalid</em>. The format of <code>&quot;details&quot;: {}</code> should follow this format;</p><section id="sec-Details-Required" secid="5.4.2.2.1"><h6><span class="spec-secid" title="link to this section"><a href="#sec-Details-Required">5.4.2.2.1</a></span>Details: Required</h6><pre><code><span class="token punctuation">{</span>
  <span class="token property">"param_name"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"((descriptive message stating parameter is required))"</span><span class="token punctuation">,</span>
    <span class="token property">"required"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></section><section id="sec-Details-Invalid" secid="5.4.2.2.2"><h6><span class="spec-secid" title="link to this section"><a href="#sec-Details-Invalid">5.4.2.2.2</a></span>Details: Invalid</h6><pre><code><span class="token punctuation">{</span>
  <span class="token property">"param_name"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"((descriptive message stating parameter is invalid))"</span><span class="token punctuation">,</span>
    <span class="token property">"invalid"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"expected"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"actual"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"hello world"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></section></section><section id="sec-FatalError" secid="5.4.2.3"><h5><span class="spec-secid" title="link to this section"><a href="#sec-FatalError">5.4.2.3</a></span>FatalError</h5><p><code>FatalError</code>s are a result of function mismanagement &ndash; either your function could not be loaded, executed, or it timed out. These <strong>must</strong> return status code <code>500</code> if over HTTP.</p></section><section id="sec-RuntimeError" secid="5.4.2.4"><h5><span class="spec-secid" title="link to this section"><a href="#sec-RuntimeError">5.4.2.4</a></span>RuntimeError</h5><p><code>RuntimeError</code>s are a result of uncaught exceptions in your code as it runs, including errors you explicitly choose to throw (or send to clients via a callback, for example). These <strong>must</strong> return status code <code>403</code> if over HTTP.</p></section><section id="sec-ValueError" secid="5.4.2.5"><h5><span class="spec-secid" title="link to this section"><a href="#sec-ValueError">5.4.2.5</a></span>ValueError</h5><p><code>ValueError</code>s are a result of your function returning an unexpected value based on FaaSlang type&#8208;safety mechanisms. These <strong>must</strong> return status code <code>502</code> if over HTTP.</p><p><code>ValueError</code> looks like an <em>invalid</em> ParameterError, where the <code>details</code> Object only ever contains a single key called <code>&quot;returns&quot;</code>. These are encountered due to implementation issues on the part of the function developer.</p><pre><code><span class="token punctuation">{</span>
  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ValueError"</span><span class="token punctuation">,</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"ValueError"</span><span class="token punctuation">,</span>
    <span class="token property">"details"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"returns"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"((descriptive message stating return value is invalid))"</span><span class="token punctuation">,</span>
        <span class="token property">"invalid"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"expected"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"boolean"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"actual"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>
          <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">2017</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></section></section></section></section><section id="sec-FaaSlang-Server-and-Gateway-Implementation" secid="6"><h2><span class="spec-secid" title="link to this section"><a href="#sec-FaaSlang-Server-and-Gateway-Implementation">6</a></span>FaaSlang Server and Gateway: Implementation</h2><p>A fully&#8208;compliant FaaSlang gateway (that just uses local function resources) is available with this package, simply clone it and run <code>npm test</code> or look at the <code>/tests</code> folder for more information.</p><p>The current FaaSlang specification is used in production by the FaaS provider <a href="https://stdlib.com">StdLib</a>, and is available for local use with the <a href="https://github.com/stdlib/lib">StdLib CLI Package</a> which relies on this repository as a dependency.</p></section><section id="sec-Acknowledgements" secid="7"><h2><span class="spec-secid" title="link to this section"><a href="#sec-Acknowledgements">7</a></span>Acknowledgements</h2><p>The software contained within this repository has been developed and is copyrighted by the <a href="https://stdlib.com">StdLib</a> Team at Polybit Inc. and is MIT licensed. The specification itself is not intended to be owned by a specific corporate entity, and has been developed in conjunction with other developers and organizations. </p></section><footer>Written in <a href="http://leebyron.com/spec-md/" target="_blank">Spec Markdown</a>.</footer><input hidden class="spec-sidebar-toggle" type="checkbox" id="spec-sidebar-toggle" aria-hidden /><label for="spec-sidebar-toggle" aria-hidden>&#x2630;</label><div class="spec-sidebar" aria-hidden><div class="spec-toc"><div class="title"><a href="#">FaaSlang</a></div><ol><li id="_sidebar_1"><a href="#sec-FaaSlang"><span class="spec-secid">1</span>FaaSlang</a><input hidden class="toggle" type="checkbox" id="_sidebar_toggle_1" /><label for="_sidebar_toggle_1"></label><ol><li id="_sidebar_1.1"><a href="#sec-Function-as-a-Service-Language"><span class="spec-secid">1.1</span>Function as a Service Language</a></li></ol></li><li id="_sidebar_2"><a href="#sec-Table-of-Contents"><span class="spec-secid">2</span>Table of Contents</a></li><li id="_sidebar_3"><a href="#sec-What-is-FaaSlang-"><span class="spec-secid">3</span>What is FaaSlang?</a></li><li id="_sidebar_4"><a href="#sec-Why-FaaSlang-"><span class="spec-secid">4</span>Why FaaSlang?</a></li><li id="_sidebar_5"><a href="#sec-Specification"><span class="spec-secid">5</span>Specification</a><input hidden class="toggle" type="checkbox" id="_sidebar_toggle_5" /><label for="_sidebar_toggle_5"></label><ol><li id="_sidebar_5.1"><a href="#sec-FaaSlang-Resource-Definition"><span class="spec-secid">5.1</span>FaaSlang Resource Definition</a></li><li id="_sidebar_5.2"><a href="#sec-Context-Definition"><span class="spec-secid">5.2</span>Context Definition</a></li><li id="_sidebar_5.3"><a href="#sec-Parameters"><span class="spec-secid">5.3</span>Parameters</a><input hidden class="toggle" type="checkbox" id="_sidebar_toggle_5.3" /><label for="_sidebar_toggle_5.3"></label><ol><li id="_sidebar_5.3.1"><a href="#sec-Constraints"><span class="spec-secid">5.3.1</span>Constraints</a></li><li id="_sidebar_5.3.2"><a href="#sec-Types"><span class="spec-secid">5.3.2</span>Types</a></li><li id="_sidebar_5.3.3"><a href="#sec-Type-Conversion"><span class="spec-secid">5.3.3</span>Type Conversion</a></li><li id="_sidebar_5.3.4"><a href="#sec-Nullability"><span class="spec-secid">5.3.4</span>Nullability</a></li><li id="_sidebar_5.3.5"><a href="#sec-Setting-HTTP-headers"><span class="spec-secid">5.3.5</span>Setting HTTP headers</a></li></ol></li><li id="_sidebar_5.4"><a href="#sec-FaaSlang-Resource-Requests"><span class="spec-secid">5.4</span>FaaSlang Resource Requests</a><input hidden class="toggle" type="checkbox" id="_sidebar_toggle_5.4" /><label for="_sidebar_toggle_5.4"></label><ol><li id="_sidebar_5.4.1"><a href="#sec-Context"><span class="spec-secid">5.4.1</span>Context</a></li><li id="_sidebar_5.4.2"><a href="#sec-Errors"><span class="spec-secid">5.4.2</span>Errors</a><input hidden class="toggle" type="checkbox" id="_sidebar_toggle_5.4.2" /><label for="_sidebar_toggle_5.4.2"></label><ol><li id="_sidebar_5.4.2.1"><a href="#sec-ClientError"><span class="spec-secid">5.4.2.1</span>ClientError</a></li><li id="_sidebar_5.4.2.2"><a href="#sec-ParameterError"><span class="spec-secid">5.4.2.2</span>ParameterError</a><input hidden class="toggle" type="checkbox" id="_sidebar_toggle_5.4.2.2" /><label for="_sidebar_toggle_5.4.2.2"></label><ol><li id="_sidebar_5.4.2.2.1"><a href="#sec-Details-Required"><span class="spec-secid">5.4.2.2.1</span>Details: Required</a></li><li id="_sidebar_5.4.2.2.2"><a href="#sec-Details-Invalid"><span class="spec-secid">5.4.2.2.2</span>Details: Invalid</a></li></ol></li><li id="_sidebar_5.4.2.3"><a href="#sec-FatalError"><span class="spec-secid">5.4.2.3</span>FatalError</a></li><li id="_sidebar_5.4.2.4"><a href="#sec-RuntimeError"><span class="spec-secid">5.4.2.4</span>RuntimeError</a></li><li id="_sidebar_5.4.2.5"><a href="#sec-ValueError"><span class="spec-secid">5.4.2.5</span>ValueError</a></li></ol></li></ol></li></ol></li><li id="_sidebar_6"><a href="#sec-FaaSlang-Server-and-Gateway-Implementation"><span class="spec-secid">6</span>FaaSlang Server and Gateway: Implementation</a></li><li id="_sidebar_7"><a href="#sec-Acknowledgements"><span class="spec-secid">7</span>Acknowledgements</a></li></ol></div><script>(function (){
var currentSection;
var numberedSections = [];

var sections = document.getElementsByTagName('section');
for (var i = 0; i < sections.length; i++) {
  if (sections[i].getAttribute('secid')) {
    numberedSections.push(sections[i]);
  }
}

var scrollPos = window.scrollY;
var pending = false;
window.addEventListener('scroll', function (e) {
  scrollPos = window.scrollY;
  if (!pending) {
    pending = true;
    window.requestAnimationFrame(function () {
      updateSectionFocus(scrollPos);
      pending = false;
    });
  }
});

function updateSectionFocus(pos) {
  var readLine = pos + document.documentElement.clientHeight / 4;

  var focusedSection;
  for (var n = numberedSections.length - 1; n >= 0; n--) {
    if (numberedSections[n].offsetTop < readLine) {
      focusedSection = numberedSections[n];
      break;
    }
  }

  var secid = focusedSection && focusedSection.getAttribute('secid');
  if (secid !== currentSection) {
    currentSection && fold(currentSection, false);
    secid && fold(secid, true);
    currentSection = secid;
  }
}

function fold(secid, check) {
  document.getElementById('_sidebar_' + secid).className = check ? 'viewing' : '';
  var sections = secid.split('.');
  while (sections.length) {
    var toggle = document.getElementById('_sidebar_toggle_' + sections.join('.'));
    if (toggle) {
      toggle.checked = check;
    }
    sections.pop();
  }
}

updateSectionFocus(window.scrollY);
})()</script></div></body></html>
